@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Crimson+Text:wght@400;600;700&display=swap');
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-dark-bg font-sans;
  }

  body.dark {
    @apply bg-dark-bg text-background;
  }

  /* Prevent orphaned words (widows) across all text content */
  p, li, blockquote {
    text-wrap: pretty;
    orphans: 3;
    widows: 3;
  }

  /* Headings use balance for better title wrapping - prevents single words on last line */
  h1, h2, h3, h4, h5, h6 {
    text-wrap: balance;
    orphans: 2;
    widows: 2;
    max-inline-size: 30em; /* Optimal line length for readability */
  }
}

@layer components {
  .btn-primary {
    @apply px-8 py-4 bg-primary text-white font-semibold rounded-lg shadow-md hover:shadow-xl transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 text-lg;
  }

  .btn-secondary {
    @apply px-8 py-4 bg-accent text-white font-semibold rounded-lg shadow-md hover:shadow-xl transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 text-lg;
  }

  .btn-outline {
    @apply px-8 py-4 border-2 border-primary text-primary font-semibold rounded-lg transition-all duration-300 hover:bg-primary hover:text-white text-lg;
  }

  /* Button swap effect - individual buttons swap on hover */
  .btn-group .btn-primary:hover ~ .btn-outline,
  .btn-group .btn-outline:hover ~ .btn-primary {
    @apply border-2 border-primary bg-transparent text-primary;
  }

  .btn-group .btn-outline:hover ~ .btn-primary,
  .btn-group .btn-primary:hover {
    @apply bg-primary text-white border-transparent shadow-lg transform -translate-y-0.5;
  }

  .btn-group .btn-outline:hover {
    @apply bg-primary text-white border-primary shadow-lg transform -translate-y-0.5;
  }

  .btn-group:has(.btn-primary:hover) .btn-outline {
    @apply border-2 border-primary bg-transparent text-primary;
  }

  .btn-group:has(.btn-outline:hover) .btn-primary {
    @apply border-2 border-primary bg-transparent text-primary;
  }

  .card {
    @apply bg-white dark:bg-dark-card rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300;
  }

  .post-card {
    @apply card overflow-hidden cursor-pointer transform hover:scale-105 hover:shadow-2xl transition-all duration-500;
  }

  .post-card-image {
    @apply w-full h-56 object-cover;
  }

  .category-badge {
    @apply inline-block px-3 py-1 text-xs font-semibold text-white bg-accent rounded-full;
  }

  .tag {
    @apply inline-block px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full mr-2 mb-2 hover:bg-primary hover:text-white transition-colors duration-200;
  }

  .nav-link {
    @apply text-dark-bg dark:text-background hover:text-primary dark:hover:text-secondary transition-colors duration-200 font-medium;
  }

  .prose-custom {
    @apply prose prose-lg max-w-none;
    @apply prose-headings:font-bold prose-headings:text-dark-bg dark:prose-headings:text-background;
    @apply prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-p:leading-relaxed;
    @apply prose-a:text-accent prose-a:no-underline hover:prose-a:underline;
    @apply prose-strong:text-dark-bg dark:prose-strong:text-background;
    @apply prose-code:text-accent prose-code:bg-gray-100 dark:prose-code:bg-gray-800 prose-code:px-1 prose-code:py-0.5 prose-code:rounded;
    @apply prose-pre:bg-gray-900 prose-pre:text-gray-100;
    @apply prose-blockquote:border-l-4 prose-blockquote:border-primary prose-blockquote:pl-4 prose-blockquote:italic;
    @apply prose-ul:list-disc prose-ol:list-decimal;
    @apply prose-li:text-gray-700 dark:prose-li:text-gray-300;
    @apply prose-img:rounded-lg prose-img:shadow-md;
  }

  .hero-gradient {
    @apply bg-primary/10;
  }

  .text-gradient {
    @apply text-primary;
  }

  .reading-progress {
    @apply fixed top-0 left-0 h-1 bg-primary z-50 transition-all duration-150;
  }

  .callout {
    @apply border-l-4 border-accent bg-accent/5 p-6 rounded-r-lg my-6;
  }

  .callout-success {
    @apply border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-6 rounded-r-lg my-6;
  }

  .callout-warning {
    @apply border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-r-lg my-6;
  }

  .callout-info {
    @apply border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-r-lg my-6;
  }

  .skeleton {
    @apply animate-pulse bg-gray-300 dark:bg-gray-700 rounded;
  }

  .back-to-top {
    @apply fixed bottom-8 right-8 w-12 h-12 bg-primary text-white rounded-full shadow-lg flex items-center justify-center opacity-0 invisible hover:bg-secondary transition-all duration-300 z-40;
  }

  .back-to-top.show {
    @apply opacity-100 visible;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-600 {
    animation-delay: 600ms;
  }
}

.fade-in {
  animation: fadeIn 0.6s ease-in forwards;
}

.slide-up {
  animation: slideUp 0.6s ease-out forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.blur-background {
  backdrop-filter: blur(10px);
  background-color: rgba(255, 255, 255, 0.8);
}

.dark .blur-background {
  background-color: rgba(26, 26, 26, 0.8);
}

img[loading="lazy"] {
  opacity: 0;
  transition: opacity 0.3s;
}

img[loading="lazy"].loaded {
  opacity: 1;
}

/* Better readability and spacing - only apply to article content */
.prose-custom p,
article p:not(.mb-0) {
  line-height: 1.8;
  margin-bottom: 1.5rem;
}

h1 { font-size: 2.75rem; line-height: 1.2; margin-bottom: 1.5rem; }
h2 { font-size: 2.25rem; line-height: 1.3; margin-bottom: 1.25rem; }
h3 { font-size: 1.875rem; line-height: 1.4; margin-bottom: 1rem; }

/* Smooth scroll behavior */
html {
  scroll-padding-top: 80px; /* Account for sticky nav */
}

/* Better focus states for accessibility */
a:focus, button:focus, input:focus, textarea:focus {
  outline: 2px solid #2C5F4F;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Loading state */
.loading {
  position: relative;
  pointer-events: none;
  opacity: 0.6;
}

.loading::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid #2C5F4F;
  border-radius: 50%;
  border-top-color: transparent;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Image loading overlay */
.image-loader-container {
  position: relative;
  overflow: hidden;
  border-radius: 1rem;
  background: #2C5F4F;
}

.image-loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #2C5F4F;
  z-index: 10;
  transition: opacity 0.4s ease-out;
}

.image-loading-overlay.hidden {
  opacity: 0;
  pointer-events: none;
}

.featured-image-loaded {
  animation: imageReveal 0.4s ease-out forwards;
}

@keyframes imageReveal {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
